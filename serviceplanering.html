<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Serviceplanering Gantt-schema</title>
    <link rel="stylesheet" href="style.css">
    <!-- Inkludera Google Charts Gantt-biblioteket -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['gantt']});
      google.charts.setOnLoadCallback(drawChart);

      function drawChart(servicePlans = []) {
        const data = new google.visualization.DataTable();
        data.addColumn('string', 'Task ID');
        data.addColumn('string', 'Task Name');
        data.addColumn('string', 'Resource');
        data.addColumn('date', 'Start Date');
        data.addColumn('date', 'End Date');
        data.addColumn('number', 'Duration');
        data.addColumn('number', 'Percent Complete');
        data.addColumn('string', 'Dependencies');

        // Ladda dynamisk data för Gantt-schemat
        const rows = servicePlans.map(plan => [
          plan.id,
          plan.task,
          plan.employee,
          new Date(plan.startDate),
          new Date(plan.endDate),
          null,  // Duration
          100,   // Percent complete, kan justeras
          null   // Dependencies
        ]);
        data.addRows(rows);

        const options = {
          height: 400
        };

        const chart = new google.visualization.Gantt(document.getElementById('gantt-chart'));
        chart.draw(data, options);
      }
    </script>
</head>
<body>
    <div class="container">
        <h1>Serviceplanering Gantt-schema</h1>

        <!-- Formulär för att lägga till planering -->
        <form id="service-planning-form">
            <label for="employee-select">Välj person:</label>
            <select id="employee-select" required>
                <!-- Medlemmar laddas dynamiskt -->
            </select>

            <label for="address">Adress:</label>
            <input type="text" id="address" placeholder="Ange adress" required>

            <label for="task">Uppgift:</label>
            <input type="text" id="task" placeholder="Ange uppgift" required>

            <label for="date">Datum:</label>
            <input type="date" id="date" required>

            <button type="submit">Lägg till planering</button>
        </form>

        <!-- Div för att visa Gantt-schema -->
        <div id="gantt-chart" style="width: 100%; height: 500px;"></div>

        <button onclick="navigateTo('index.html')">Tillbaka</button>
    </div>
    <script type="module" src="serviceplanering.js"></script>
</body>
</html>
